Page({
  data: {
    rippleName: "",
    length: 0,

    detail:
    {
      title: "ÁäØÈîô-ÂèåÁÆ°Â∑¥‰πå",
      info: "Â∞èÂì•ÁöÑÂ£∞Èü≥ÁúüÂ•Ω„ÄÇ„Ää‰∏ÄÂâ™Ê¢Ö„ÄãÊîπ‰∫ÜËøô‰πàÂ§öÁâàÔºåËøòÊòØËøôÁâàËÄêÂê¨„ÄÇÂ¶ÇÊ≥£Â¶ÇËØâÔºå‰ΩôÈü≥Ë¢ÖË¢Ö„ÄÇ",
      uName: "Èõ®Á¢éÊ±üÂçó",
      isVideo: true,
      browse: 4299,
      like: 2113,
      comment: 789,
      time: "Êò®Â§©"
    },
    comments: [
      {
        id: 1,
        content: "‰πù‰πùÂÖ´ÂçÅ‰∏ÄÈöæÔºåÊúÄÈöæËøáÁöÑÔºåÂÖ∂ÂÆûÊòØÂ•≥ÂÑøÂõΩËøô‰∏ÄÂÖ≥„ÄÇ",
        userInfo: {
          id: 1,
          nickName: "Èõ®Á¢éÊ±üÂçó",
          avatarUrl: 'http://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI7hsTibhnpQPxN0eJPoiaNpPq0HSQzG9XpvmicjAjr0x5f1GcNd7LpHoXMgiadUbd4ibn46HibM5FMXBow/0',
        },
        created_at: "2016-12-11",
      },
      {
        uName: "Âº†ÁèäÁèä",
        time: "2016-12-11",
        content: "Èü≥‰πê‰∏çÂàÜÂπ¥Á∫™Ôºå‰∏çËøá‰ª§‰∫∫ÂºÄÂøÉÁöÑÊòØ‰Ω†‰ª¨‰πü‰∏ç‰ºöÂπ¥ËΩªÂ§™‰πÖ„ÄÇüòùüòùüòùüòù"
      },
      {
        uName: "È∫¶Áî∞ÁöÑÂÆàÊúõËÄÖ",
        time: "2016-12-11",
        content: "ÁúãÁöÑÊó∂ÂÄôËøòÂæàÂ∞èÔºå‰∏çÂ§™ÊòéÁôΩÈáåÈù¢ÁöÑÊïÖ‰∫ãÔºåÈïøÂ§ßÂêéÊâçÂèëÁé∞Ë•øÊ∏∏ËÆ∞ÈáåÊ∞¥Â§™Ê∑±‰∫Ü„ÄÇüò¢üò¢üò°üò°üòºüòºüçÜüçáüçáüçÜüëßüë∞üë®üíëüíáüíÖüê∂üê∂üôè‚úàüö≤üö≤üò°üòÖüëøüòñüò®üò¢üòªüöÉüöÉüöå"
      },
      {
        uName: "~LUCK",
        time: "2016-12-11",
        content: "86Áâà„ÄäË•øÊ∏∏ËÆ∞„ÄãÁªùÂØπÊòØÈÇ£‰ª£‰∫∫ÁöÑÂõΩÊ∞ëËÆ∞ÂøÜÔºåÊîæÂÅáÂ§©Â§©Á≠âÁùÄÁúãÔºå‰∏ÄÈÅçÂèà‰∏ÄÈÅçÔºåÊÇüÁ©∫Ë¢´ÂéãÂú®‰∫îÊåáÂ±±‰∏ãÁªèÂéÜÊò•Â§èÁßãÂÜ¨ÔºåÂØíÂÜ¨Â§ßÈõ™Èáå‰∏Ä‰∏™‰∫∫ÂêÉÈõ™ÔºåË∑ØËøáÁöÑÂ∞èÁâßÁ´•ÈÄÅÊù•Ê∞¥ÊûúÔºåÈÇ£‰∏ÄÊÆµÊàëÂíåÂ∞è‰ºô‰º¥‰ª¨Âì≠ÁöÑÁ®ÄÈáåÂìóÂï¶ÔºåÂΩìÂπ¥ÁöÑÁâπÊäÄÂêéÊúüÂà∂‰ΩúËøòÂæàËêΩÂêéÔºå‰ΩÜÊâÄÊúâÊºîÂëòÈÉΩÊòØÁî®ÂøÉÂú®Â°ëÈÄ†ËßíËâ≤ÔºåÊ≤°ÊúâËâ≥‰øóÁöÑÊúçË£ÖÈÄ†ÂûãÔºåËâØÂøÉÂà∂‰ΩúÔºÅ ‰ª•Âêé‰ºöÈô™Â≠©Â≠êÂÜçÁúã"
      },
      {
        uName: "Ê≤ÉÂæ∑Â§©¬∑Â®ú‰πàÂ∏•",
        time: "2016-12-11",
        content: "ÊÉ≥Ëµ∑ÔºåÂ∞èÊó∂ÂÄôÔºåÁà∂‰∫≤ÊïôÊàëËøôÈ¶ñÊ≠åÁöÑÊ†∑Â≠ê„ÄÇ"
      },
      {
        uName: "Èõ®Á¢éÊ±üÂçó",
        time: "2016-12-11",
        content: "ÊàëÁöÑÂÆøÂëΩÔºåÂàÜ‰∏§ÊÆµÔºå Êú™ÈÅáËßÅ‰Ω†Êó∂ÔºåÂíåÈÅáËßÅ‰Ω†‰ª•Âêé„ÄÇ ‰Ω†Ê≤ªÂ•ΩÊàëÁöÑÂøßÈÉÅÔºåËÄåÂêéËµêÊàëÊÇ≤‰º§„ÄÇ ÂøßÈÉÅÂíåÊÇ≤‰º§‰πãÈó¥ÁöÑÁâáÂàªÊ¨¢ÂñúÔºå ÈÄèÊîØ‰∫ÜÊàëÁîüÂëΩÂÖ®ÈÉ®ÁöÑÁÉ≠ÊÉÖÂÇ®ËìÑ„ÄÇ ÊÉ≥È•Æ‰∏Ä‰∫õÈÖíÔºåËÆ©ÁÅµÈ≠ÇÂ§±ÈáçÔºåÂ•ΩË¢´È£éÂêπËµ∞„ÄÇ ÂèØ‰∏ÄÊÉ≥Âà∞ÁªàÂ∞ÜÊòØ‰Ω†ÁöÑË∑Ø‰∫∫Ôºå ‰æøËßâÂæóÔºåÊ≤¶‰∏∫Êï¥‰∏™‰∏ñÁïåÁöÑË∑Ø‰∫∫„ÄÇ È£éËôΩÂ§ßÔºåÈÉΩÁªïËøáÊàëÁÅµÈ≠Ç„ÄÇ"
      },
      {
        uName: "Èõ®Á¢éÊ±üÂçó",
        time: "2016-12-01",
        content: "‰πù‰πùÂÖ´ÂçÅ‰∏ÄÈöæÔºåÊúÄÈöæËøáÁöÑÔºåÂÖ∂ÂÆûÊòØÂ•≥ÂÑøÂõΩËøô‰∏ÄÂÖ≥ÔºåÂõ†‰∏∫ÊØîËµ∑ÂÖ∂‰ªñÁöÑËâ∞ÈöæÂõ∞Ëã¶Êù•ËØ¥ÔºåÊ≠§Êó∂ÁöÑÂîêÂÉßÊòØÁúüÁöÑÂä®ÂøÉ‰∫ÜÔºå‰∏ÄÂè•‚ÄúÊù•ÁîüËã•ÊúâÁºòÂàÜ‚ÄùÈÅìÂ∞Ω‰∏ÄÂàáÔºåÂè™ÊòØ‰∏∫‰∫ÜÂøÉ‰∏≠Â¥áÈ´òÁöÑÁêÜÊÉ≥ÔºåÁ∫µ‰ΩøÂøÉÂä®‰πüË¶ÅÊñ≠ÁªùÊüîÊÉÖÁªßÁª≠Ë•øË°å„ÄÇ‰∏∫ÂõΩÁéãÊÉãÊÉúÔºåÂêåÊó∂‰πüÂØπÂîêÂÉßÂÖÖÊª°Â¥áÊï¨ÔºåÂ∞§ÂÖ∂ÊòØ‰∫ÜËß£‰∫ÜÂè≤‰∏äÁúüÂÆûÁöÑÂîêÁéÑÂ•ò‰ª•ÂêéÔºåÊõ¥ÊòØËßâÂæóÊ≠§‰∫∫‰∫Ü‰∏çËµ∑„ÄÇ"
      }
    ],

  },

  onLoad: function (options) {
    console.log('options', options)
    let that = this;
    // that.setData({
    //   love_id: options.love_id
    // })
    that.setData({
      love_id: 13
    })


    let wesecret = wx.getStorageSync('wesecret');
    if (wesecret) {
      that.setData({
        wesecret: wesecret
      })
    }

    that.load_love();

    wx.getSystemInfo({
      success: (res) => {
        let ww = res.windowWidth;
        var length = 3;
        var row = Math.ceil(length / 3);
        var line = Math.ceil(length / row);
        var widthM = ww - 20;
        var widthX = (widthM / line).toFixed(2) - 6;
        var margin = "3px";
        that.setData({
          imgCss: {
            width: widthX + 'px',
            height: widthX + 'px',
            margin: margin
          }
        })
      }
    })
  },
  onShow: function () {
    console.log('111111');
  },
  load_love: function () {
    let that = this;
    if (that.data.wesecret) {
      wx.request({
        url: 'https://collhome.com/api/loves/' + that.data.love_id + '/comments?wesecret=' + that.data.wesecret,
        success: function (res) {
          console.log('love', res.data)
          let love = res.data.data.love;
          let comments = res.data.data.comments;
          that.setData({
            love: love,
            comments: comments
          })
        }
      })
    } else {
      wx.request({
        url: 'https://collhome.com/api/loves/' + that.data.love_id + '/comments',
        success: function (res) {
          console.log('love', res.data)
          let love = res.data.data.love;
          let comments = res.data.data.comments;

          that.setData({
            love: love,
            comments: comments
          })
        }
      })
    }
  },
  setRipple: function () {
    var that = this;
    that.setData({
      rippleName: "bounceIn"
    });
    if (that.data.length == 0) {
      that.setData({
        length: 1
      })
    } else {
      that.setData({
        length: 0
      })
    }
    setTimeout(function () {

      that.setData({
        rippleName: ""
      });
    }, 1000)
  },
  deleteArticle: function () {
    wx.showModal({
      title: 'ÊèêÁ§∫',
      content: 'Ë¶ÅÂà†Èô§ËøôÊù°Ë°®ÁôΩÂêóÔºü',
      confirmColor: '#ff0000',
      success: function (res) {
        if (res.confirm) {
          console.log('Áî®Êà∑ÁÇπÂáªÁ°ÆÂÆö')
        }
      }
    })
  }
})